javascript:(()=>{if(document.getElementById("__draw_overlay_container__")){console.warn("Overlay already running.");return}const e=(e,t,n)=>Math.max(t,Math.min(n,e));function t(e,t,n){const r=n*t,o=r*(1-Math.abs(e/60%2-1)),a=n-r;let l=0,c=0,d=0;return 0<=e&&e<60?(l=r,c=o,d=0):60<=e&&e<120?(l=o,c=r,d=0):120<=e&&e<180?(l=0,c=r,d=o):180<=e&&e<240?(l=0,c=o,d=r):240<=e&&e<300?(l=o,c=0,d=r):(l=r,c=0,d=o),[Math.round((l+a)*255),Math.round((c+a)*255),Math.round((d+a)*255)]}function n(e,t,n){return"#"+[e,t,n].map((e=>e.toString(16).padStart(2,"0"))).join("")}const r=document.createElement("div");r.id="__draw_overlay_container__",Object.assign(r.style,{position:"fixed",inset:"0",zIndex:"2147483647",pointerEvents:"none"}),document.documentElement.appendChild(r);const o=document.createElement("div");r.appendChild(o);const a=o.attachShadow({mode:"open"}),l=document.createElement("style");l.textContent=":host{all:initial}.ui,.toggle{pointer-events:auto;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}.toggle{position:fixed;top:12px;right:12px;width:40px;height:40px;border-radius:10px;background:#111;color:#fff;border:1px solid #444;display:grid;place-items:center;cursor:pointer;user-select:none;box-shadow:0 8px 24px rgba(0,0,0,.25)}.panel{position:fixed;top:60px;right:12px;width:280px;background:#1b1b1b;color:#eee;border:1px solid #333;border-radius:12px;padding:12px;display:none;gap:10px;box-shadow:0 16px 40px rgba(0,0,0,.35)}.row{display:grid;gap:8px}.label{font-size:12px;color:#bbb}.slider{width:100%}.tools{display:flex;gap:8px;flex-wrap:wrap}.btn{background:#2a2a2a;border:1px solid #444;color:#eee;padding:6px 10px;border-radius:8px;cursor:pointer}.btn.active{outline:2px solid #6aa3ff}.btn.danger{background:#3a1111;border-color:#772222;color:#ffb3b3}.pickerRow{display:grid;grid-template-columns:1fr 16px;gap:8px;align-items:center}.sv{width:100%;height:150px;border-radius:8px;border:1px solid #444;cursor:crosshair;position:relative}.sv .knob{position:absolute;width:12px;height:12px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 0 1px rgba(0,0,0,.5);transform:translate(-6px,-6px);pointer-events:none}.hue{width:16px;height:150px;border-radius:8px;border:1px solid #444;cursor:ns-resize;position:relative}.hue .bar{position:absolute;inset:0;border-radius:8px;background:linear-gradient(180deg,#f00 0%,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,#f00 100%)}.hue .knob{position:absolute;left:-2px;right:-2px;height:4px;background:#fff;box-shadow:0 0 0 1px rgba(0,0,0,.5);transform:translateY(-2px)}.swatch{height:28px;border-radius:6px;border:1px solid #444}.tip{font-size:11px;color:#888}",a.appendChild(l);const c=document.createElement("canvas");Object.assign(c.style,{position:"fixed",left:"0",top:"0",width:"100vw",height:"100vh",cursor:"crosshair"}),c.className="ui",c.id="__draw_canvas__",c.style.pointerEvents="auto",a.appendChild(c);const d=c.getContext("2d");let i=window.devicePixelRatio||1;function s(){i=window.devicePixelRatio||1;const e=Math.floor(window.innerWidth*i),t=Math.floor(window.innerHeight*i);c.width=e,c.height=t,c.style.width="100vw",c.style.height="100vh",d.lineCap="round",d.lineJoin="round"}s();const u=()=>{const e=d.getImageData(0,0,c.width,c.height);s(),d.putImageData(e,0,0)};window.addEventListener("resize",u);const m=document.createElement("div");m.className="toggle ui",m.textContent="v",a.appendChild(m);const h=document.createElement("div");h.className="panel ui",a.appendChild(h);const p=document.createElement("div");p.className="pickerRow";const g=document.createElement("div");g.className="sv";const f=document.createElement("div");f.className="knob",g.appendChild(f);const v=document.createElement("div");v.className="hue";const y=document.createElement("div");y.className="bar",v.appendChild(y);const w=document.createElement("div");w.className="knob",v.appendChild(w),p.appendChild(g),p.appendChild(v);const b=document.createElement("div");b.className="swatch";const E=document.createElement("div");E.className="row";const x=document.createElement("div");x.className="label",x.textContent="Pen Size";const k=document.createElement("input");k.type="range",k.min="1",k.max="80",k.value="8",k.className="slider",E.appendChild(x),E.appendChild(k);const S=document.createElement("div");S.className="tools";const C=e=>{const t=document.createElement("button");return t.className="btn",t.textContent=e,t},L=C("Draw"),M=C("Eraser"),D=C("Fill");L.classList.add("active"),S.append(L,M,D);const I=document.createElement("div");I.className="tip",I.textContent="Hold mouse to draw • Click to fill • Red X removes app";const R=document.createElement("button");R.className="btn danger",R.textContent="✕ Remove",h.append(p,b,E,S,I,R);let P=0,U=1,z=1,F="draw",H=!1,N=0,O=0;function j(){const[e,n,r]=t(P,1,1);g.style.background=`linear-gradient(0deg,#000,rgba(0,0,0,0)),linear-gradient(90deg,#fff,rgb(${e},${n},${r}))`}function A(){w.style.top=`${P/360*v.clientHeight}px`,j(),B()}function q(){const e=U*g.clientWidth,t=(1-z)*g.clientHeight;f.style.left=`${e}px`,f.style.top=`${t}px`}function B(){const[e,r,o]=t(P,U,z);b.style.background=n(e,r,o)}function G(){const[e,n,r]=t(P,U,z);return{r:e,g:n,b:r,hex:n(e,n,r)}}const J=()=>requestAnimationFrame((()=>{A(),q()}));J();function K(t){const n=g.getBoundingClientRect(),r=e((t.clientX-n.left)/n.width,0,1),o=e((t.clientY-n.top)/n.height,0,1);U=r,z=1-o,q(),B()}function Q(n){const r=v.getBoundingClientRect(),o=e((n.clientY-r.top)/r.height,0,1);P=e(360*o,0,359.999),A()}let T=!1,V=!1;g.addEventListener("mousedown",(e=>{T=!0,K(e),e.preventDefault()})),v.addEventListener("mousedown",(e=>{V=!0,Q(e),e.preventDefault()})),a.addEventListener("mousemove",(e=>{T&&K(e),V&&Q(e)})),window.addEventListener("mouseup",(()=>{T=!1,V=!1}));function W(e){F=e,[L,M,D].forEach((e=>e.classList.remove("active"))),({draw:L,eraser:M,fill:D}[e]||L).classList.add("active"),c.style.cursor="fill"===e?"cell":"crosshair"}L.addEventListener("click",(()=>W("draw"))),M.addEventListener("click",(()=>W("eraser"))),D.addEventListener("click",(()=>W("fill")));let X=!1;function Y(){h.style.display=X?"grid":"none"}m.addEventListener("click",(e=>{X=!X,Y(),e.stopPropagation()})),Y();function Z(e){const t=c.getBoundingClientRect();return{x:(e.clientX-t.left)*i,y:(e.clientY-t.top)*i}}c.addEventListener("mousedown",(e=>{if(0===e.button){const{ x:t,y:n }=Z(e);if("fill"===F)return void $(Math.round(t),Math.round(n),G());H=!0,N=t,O=n;const r=parseInt(k.value,10)*i;"eraser"===F?(d.globalCompositeOperation="destination-out",d.strokeStyle="rgba(0,0,0,1)"):(d.globalCompositeOperation="source-over",d.strokeStyle=G().hex),d.lineWidth=r,d.beginPath(),d.moveTo(N,O),d.lineTo(t,n),d.stroke()}})),c.addEventListener("mousemove",(e=>{if(H){const{ x:t,y:n }=Z(e);d.lineTo(t,n),d.stroke(),N=t,O=n}})),window.addEventListener("mouseup",(()=>{H&&(H=!1,d.closePath())}),!0);function $(e,n,r){const o=c.width,a=c.height;if(!(e<0||n<0||e>=o||n>=a)){const l=d.getImageData(0,0,o,a),c=l.data,i=(e,t)=>(t*o+e)*4,s={r:c[i(e,n)],g:c[i(e,n)+1],b:c[i(e,n)+2],a:c[i(e,n)+3]},u=e=>c[e]===s.r&&c[e+1]===s.g&&c[e+2]===s.b&&c[e+3]===s.a,m={r:r.r,g:r.g,b:r.b,a:255};if(!(s.r===m.r&&s.g===m.g&&s.b===m.b&&s.a===m.a)){const h=[];h.push([e,n]);let p=0;for(;p<h.length;){const[e,n]=h[p++];let r=e;for(;r>=0&&u(i(r,n));)r--;r++;let o=e;for(;o<o&&u(i(o,n));)o++;o--;for(let e=r;e<=o;e++){const r=i(e,n);c[r]=m.r,c[r+1]=m.g,c[r+2]=m.b,c[r+3]=m.a,n>0&&u(i(e,n-1))&&h.push([e,n-1]),n<a-1&&u(i(e,n+1))&&h.push([e,n+1])}}d.putImageData(l,0,0)}}}function ee(){window.removeEventListener("resize",u),r.remove()}R.addEventListener("click",(()=>{d.clearRect(0,0,c.width,c.height),ee()}))})(); 
